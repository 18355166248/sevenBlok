# 887. 鸡蛋掉落

### 解法一

```javascript
/*
 * @lc app=leetcode.cn id=887 lang=javascript
 *
 * [887] 鸡蛋掉落
 */

// @lc code=start
/**
 * @param {number} k
 * @param {number} n
 * @return {number}
 */
var superEggDrop = function (k, n) {
  const map = new Map();
  return dp(k, n);

  function dp(k, n) {
    // 判断是否存在缓存
    if (!map.has(n * 100 + k)) {
      let ans;

      if (n === 0) {
        // 没有楼层结果为0
        ans = 0;
      } else if (k === 1) {
        // 一个鸡蛋 需要那就需要每层都可能执行一次
        ans = n;
      } else {
        let start = 1;
        let end = n;
        while (start + 1 < end) {
          // 使用二分法
          const mid = (start + end) >> 1;
          // 碎了一个鸡蛋 所以在上
          const breakNum = dp(k - 1, mid - 1);
          // 没碎 所以在下
          const notBreakNum = dp(k, n - mid);
          // 取更大的值
          if (breakNum < notBreakNum) {
            start = mid;
          } else if (breakNum > notBreakNum) {
            end = mid;
          } else {
            start = end = mid;
          }
        }

        ans =
          1 +
          Math.min(
            Math.max(dp(k - 1, start - 1), dp(k, n - start)),
            Math.max(dp(k - 1, end - 1), dp(k, n - end))
          );
      }
      map.set(n * 100 + k, ans);
    }
    // 直接使用缓存
    return map.get(n * 100 + k);
  }
};

// var superEggDrop = function (k, n) { }
// @lc code=end

console.log(superEggDrop(1, 2)); // 2
console.log(superEggDrop(2, 6)); // 3
console.log(superEggDrop(3, 14)); // 4
```
