# 42. 接雨水

```js
/**
 * @param {number[]} height
 * @return {number}
 */
var trap = function (height) {
  if (height.length === 1) return 0;

  // 栈
  const stack = [];
  // 总数
  let total = 0;
  // 遍历索引
  let current = 0;
  while (current < height.length) {
    // 栈不为空，且当前值大于栈顶值，则弹出栈顶元素
    while (stack.length !== 0 && height[current] > stack[0].v) {
      // 弹出栈顶元素
      const { v } = stack.shift();
      // 如果弹出栈顶后，栈为空，表示中间没有凹槽 则跳出当前循环 继续往后遍历
      if (stack.length === 0) break;
      // 获取当前的栈顶元素 也就是两堵墙的最左边墙 current是最右边墙
      const { v: newV, i: index } = stack[0];
      // 计算两堵墙之间的距离
      const distance = current - index - 1;
      // 对比两堵墙最小值
      const min = Math.min(height[current], newV);
      // 计算两堵墙最矮的与弹出栈顶(凹槽)的差
      total += distance * (min - v);
    }
    stack.unshift({ i: current, v: height[current] });
    current++;
  }
  return total;
};
```
