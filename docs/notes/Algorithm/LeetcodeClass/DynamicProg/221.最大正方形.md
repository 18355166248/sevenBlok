# 221. 最大正方形

```javascript
/*
 * @lc app=leetcode.cn id=221 lang=javascript
 *
 * [221] 最大正方形
 */

// @lc code=start
/**
 * @param {character[][]} matrix
 * @return {number}
 */
var maximalSquare = function (matrix) {
  // 初始化最大值变量
  let max = 0;
  // 遍历二维数组
  for (let i = 0; i < matrix.length; i++) {
    for (let j = 0; j < matrix[0].length; j++) {
      // 将字符串转化为数字 动态修改原数组
      matrix[i][j] = Number(matrix[i][j]);
      // 排除边界情况 也就是最顶部, 最左侧和为0的 他们的值保持不变即可
      if (i !== 0 && j !== 0 && matrix[i][j] === 1) {
        // 判断左上角, 右上角, 左下角是否为1 如果为1 表示可以组成正方形
        if (
          matrix[i - 1][j] >= 1 &&
          matrix[i][j - 1] >= 1 &&
          matrix[i - 1][j - 1] >= 1
        ) {
          // 取左上角, 右上角, 左下角的最小值表示之前组成最小正方形的边长
          // 取最小正方形的平方根 再加上1 得到当前正方形的边长 再开方得到当前正方形的面积
          matrix[i][j] = Math.pow(
            Math.sqrt(
              Math.min(matrix[i - 1][j], matrix[i][j - 1], matrix[i - 1][j - 1])
            ) + 1,
            2
          );
        }
      }
      // 更新最大值
      max = Math.max(max, matrix[i][j]);
    }
  }
  return max;
};
// @lc code=end

console.log(
  maximalSquare([
    ["1", "0", "1", "0", "0"],
    ["1", "0", "1", "1", "1"],
    ["1", "1", "1", "1", "1"],
    ["1", "0", "0", "1", "0"],
  ])
); // 4
console.log(
  maximalSquare([
    ["0", "1"],
    ["1", "0"],
  ])
); //1
console.log(maximalSquare([["0"]])); //0

console.log(
  maximalSquare([
    ["1", "1", "1", "1", "0"],
    ["1", "1", "1", "1", "0"],
    ["1", "1", "1", "1", "1"],
    ["1", "1", "1", "1", "1"],
    ["0", "0", "1", "1", "1"],
  ])
); // 16

console.log(
  maximalSquare([
    ["1", "0", "1", "0", "0", "1", "1", "1", "0"],
    ["1", "1", "1", "0", "0", "0", "0", "0", "1"],
    ["0", "0", "1", "1", "0", "0", "0", "1", "1"],
    ["0", "1", "1", "0", "0", "1", "0", "0", "1"],
    ["1", "1", "0", "1", "1", "0", "0", "1", "0"],
    ["0", "1", "1", "1", "1", "1", "1", "0", "1"],
    ["1", "0", "1", "1", "1", "0", "0", "1", "0"],
    ["1", "1", "1", "0", "1", "0", "0", "0", "1"],
    ["0", "1", "1", "1", "1", "0", "0", "1", "0"],
    ["1", "0", "0", "1", "1", "1", "0", "0", "0"],
  ])
); // 4
```

- 时间复杂度 O(m\*n)
- 空间复杂度 O(1)
